@page
@model TermsModel
@{
    ViewData["Title"] = "Terms of Service";

    var lang = (Request.Query["lang"].ToString() ?? "").ToLowerInvariant();
    var langMap = new Dictionary<string, string>
    {
        ["en"] = "term_20250510_en.html",
        ["ko"] = "term_20250510_kr.html",
        ["ja"] = "term_20250510_ja.html"
    };
    var currentLang = langMap.ContainsKey(lang) ? lang : "en";
    var iframeSrc = Url.Content($"~/policy/{langMap[currentLang]}");
    string? LangLink(string code) => Url.Page("/Terms", new { lang = code });
}

<section class="policy-shell">
    <div class="policy-header">
        <div>
            <p class="pill">Terms</p>
            <h1>@ViewData["Title"]</h1>
            <p class="muted">Select your language to view the latest Cry Wolf terms of service.</p>
        </div>
        <div class="lang-switch">
            <a class="link-pill @(currentLang == "en" ? "active" : "")" href="@LangLink("en")">English</a>
            <a class="link-pill @(currentLang == "ko" ? "active" : "")" href="@LangLink("ko")">한국어</a>
            <a class="link-pill @(currentLang == "ja" ? "active" : "")" href="@LangLink("ja")">日本語</a>
        </div>
    </div>

    <div class="policy-frame">
        <iframe src="@iframeSrc" title="Terms of Service (@currentLang)" sandbox></iframe>
    </div>
</section>