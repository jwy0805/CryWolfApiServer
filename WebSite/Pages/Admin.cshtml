@page
@model AdminModel
@{
    ViewData["Title"] = "Admin";
}

<section class="admin-shell">
    <header class="admin-header">
        <h1>Admin Console</h1>
        <p class="muted">메시지/공지 발송, 대상 선택을 여기서 관리합니다.</p>
    </header>

    <div class="admin-card">
        <div class="field-row">
            <span class="field-label">타입</span>
            <div class="toggle-group" data-message-toggle>
                <button type="button" class="toggle-btn is-active" data-message-type="message">메일</button>
                <button type="button" class="toggle-btn" data-message-type="notice">공지사항</button>
            </div>
        </div>

        <div class="field-row">
            <span class="field-label">대상</span>
            <div class="toggle-group" data-target-toggle>
                <button type="button" class="toggle-btn is-active" data-target-type="all">모두에게</button>
                <button type="button" class="toggle-btn" data-target-type="select">선택</button>
            </div>
        </div>

        <div class="field-row range-inputs" data-range-block hidden>
            <span class="field-label">유저 ID 범위</span>
            <div class="range-form">
                <div class="range-pair">
                    <input type="number" class="range-input" placeholder="예: 1" min="0" data-range-start/>
                    <span class="range-tilde">~</span>
                    <input type="number" class="range-input" placeholder="예: 90" min="0" data-range-end/>
                </div>
                <button type="button" class="btn-add-range" data-add-range>추가</button>
            </div>
            <p class="range-hint muted">예) 1 ~ 90 입력 후 추가 → 다시 101 ~ 140 입력 후 추가</p>
        </div>

        <div class="field-row">
            <span class="field-label">선택된 대상</span>
            <div class="selection-summary" data-selection-summary>모든 유저에게 전송됩니다.</div>
        </div>

        <div class="field-row">
            <span class="field-label">언어</span>
            <div class="toggle-group lang-toggle" data-lang-toggle></div>
            <p class="muted lang-hint">언어 탭을 선택하면 언어별 폼이 생성됩니다. (ko/en/ja/vi 기본, 확장 가능)</p>
        </div>

        <div class="field-row">
            <span class="field-label">언어별 내용</span>
            <div class="lang-form-list" data-lang-forms></div>
        </div>

        <div class="field-row notice-schedule" data-notice-schedule hidden>
            <span class="field-label">공지 기간</span>
            <div class="schedule-grid">
                <label class="schedule-field">
                    <span>Start At</span>
                    <input type="datetime-local" class="admin-input admin-datetime" data-start-at />
                </label>
                <label class="schedule-field">
                    <span>End At</span>
                    <input type="datetime-local" class="admin-input admin-datetime" data-end-at />
                </label>
            </div>
        </div>

        <div class="actions-row">
            <button type="button" class="btn-send" data-send>전송</button>
            <span class="send-status muted" data-send-status></span>
        </div>
    </div>
</section>

@section Scripts {
    <script src="~/js/admin.js" asp-append-version="true"></script>
}
